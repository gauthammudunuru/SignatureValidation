from openai import OpenAI
from PIL import Image
import json
import base64

client = OpenAI()


def encode_image(image_path):
    with open(image_path, "rb") as f:
        return base64.b64encode(f.read()).decode("utf-8")


image_base64 = encode_image("document.png")

response = client.responses.create(
    model="gpt-4.1",
    input=[
        {
            "role": "user",
            "content": [
                {
                    "type": "input_text",
                    "text": """
Find handwritten signatures in this document image.

Return ONLY valid JSON:

{
  "signatures":[
    {"x":int,"y":int,"width":int,"height":int}
  ]
}
"""
                },
                {
                    "type": "input_image",
                    "image_url": f"data:image/png;base64,{image_base64}"
                }
            ]
        }
    ]
)

result_text = response.output_text
print(result_text)
